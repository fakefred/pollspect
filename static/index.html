<!DOCTYPE html>
<html>
  <head>
    <title>Pollspect</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/static/index.css" />
    <link rel="icon" href="/static/favicon.webp" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  </head>
  <body>
    <h1>Pollspect</h1>
    <div id="analyze-container">
      <input
        id="input"
        placeholder="URL of toot or key obtained from pollspect"
        autofocus
      />
      <button onclick="requestAnalysis()">Pollspect</button>
      <form action="/random" style="display: inline;">
        <input type="submit" value="I'm feeling lucky" />
      </form>
      <br />
      <form>
        <label id="interval-label" for="interval"
          >Interval between snapshots:</label
        >
        <select id="interval">
          <option value="5">5 minutes</option>
          <option value="10">10 minutes</option>
          <option value="30" selected>30 minutes</option>
          <option value="60">1 hour</option>
          <option value="120">2 hours</option>
          <option value="360">6 hours</option>
          <option value="720">12 hours</option>
          <option value="1440">24 hours</option>
        </select>
      </form>

      <p id="alert">
        If the toot's URL contain a poll not yet in Pollspect's database, select
        Snapshot Interval before clicking Pollspect if you wish Pollspect to
        subscribe to the new poll. In this case, please be considerate for the
        admins of the instance. API requests cost. If the poll lasts longer than
        a day, select an interval no shorter than 30 minutes.
      </p>
    </div>
    <br />
    <div id="plot-container">
      <canvas id="plot"></canvas>
    </div>
    <br /><br />
    <span>All times are UTC.</span>
    <br /><br />
    <span id="list-label">Ongoing polls:</span>
    <ul id="list"></ul>
    <footer>
      Confused? See <a href="/static/help.html">Help</a>.<br />
      Pollspect is WIP. Contribute on
      <a href="https://github.com/fakefred/pollspect">GitHub</a>.<br />
      Author is 
      <a href="https://mastodon.technology/@fakefred"
        >@fakefred@mastodon.technology.
      </a>
      <br /><br />
    </footer>
    <script src="/static/index.js"></script>
  </body>
</html>
